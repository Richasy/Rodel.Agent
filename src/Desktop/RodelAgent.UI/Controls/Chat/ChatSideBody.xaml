<?xml version="1.0" encoding="utf-8" ?>
<local:ChatPageControlBase
    x:Class="RodelAgent.UI.Controls.Chat.ChatSideBody"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:ext="using:RodelAgent.UI.Extensions"
    xmlns:items="using:RodelAgent.UI.ViewModels.Items"
    xmlns:local="using:RodelAgent.UI.Controls.Chat"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:viewmodels="using:Richasy.WinUIKernel.AI.ViewModels"
    mc:Ignorable="d">

    <UserControl.Resources>
        <StackLayout x:Key="BasicLayout" Spacing="4" />
    </UserControl.Resources>

    <Grid>
        <ScrollViewer
            Padding="8,0"
            Style="{StaticResource PageScrollViewerStyle}"
            Visibility="{x:Bind ViewModel.IsAgentSectionVisible, Mode=OneWay}">
            <StackPanel Margin="0,0,0,20">
                <TextBlock
                    Margin="4,0,0,8"
                    HorizontalAlignment="Left"
                    Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                    Style="{StaticResource CaptionTextBlockStyle}"
                    Text="{ext:Locale Name=Services}" />
                <ItemsRepeater ItemsSource="{x:Bind ViewModel.Services, Mode=OneWay}" Layout="{StaticResource BasicLayout}">
                    <ItemsRepeater.ItemTemplate>
                        <DataTemplate x:DataType="viewmodels:ChatServiceItemViewModel">
                            <local:ChatServiceItemControl ViewModel="{x:Bind}" />
                        </DataTemplate>
                    </ItemsRepeater.ItemTemplate>
                </ItemsRepeater>
                <StackPanel Margin="0,12,0,0" Visibility="{x:Bind ViewModel.IsAgentListVisible, Mode=OneWay}">
                    <TextBlock
                        Margin="4,0,0,8"
                        HorizontalAlignment="Left"
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                        Style="{StaticResource CaptionTextBlockStyle}"
                        Text="{ext:Locale Name=Agents}" />
                    <ItemsRepeater ItemsSource="{x:Bind ViewModel.Agents}" Layout="{StaticResource BasicLayout}">
                        <ItemsRepeater.ItemTemplate>
                            <DataTemplate x:DataType="items:ChatAgentItemViewModel">
                                <local:ChatAgentItemControl ViewModel="{x:Bind}" />
                            </DataTemplate>
                        </ItemsRepeater.ItemTemplate>
                    </ItemsRepeater>
                </StackPanel>
                <StackPanel Margin="0,12,0,0" Visibility="{x:Bind ViewModel.IsGroupListVisible, Mode=OneWay}">
                    <TextBlock
                        Margin="4,0,0,8"
                        HorizontalAlignment="Left"
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                        Style="{StaticResource CaptionTextBlockStyle}"
                        Text="{ext:Locale Name=Groups}" />
                    <ItemsRepeater ItemsSource="{x:Bind ViewModel.Groups}" Layout="{StaticResource BasicLayout}">
                        <ItemsRepeater.ItemTemplate>
                            <DataTemplate x:DataType="items:ChatGroupItemViewModel">
                                <local:ChatGroupItemControl ViewModel="{x:Bind}" />
                            </DataTemplate>
                        </ItemsRepeater.ItemTemplate>
                    </ItemsRepeater>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>
        <ProgressRing IsActive="{x:Bind ViewModel.IsInitializing, Mode=OneWay}" Style="{StaticResource PageProgressRingStyle}" />
    </Grid>

</local:ChatPageControlBase>
